<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quarry MIS - Management Information System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            padding: 20px;
        }

        /* Header Styles */
        .header {
            border-bottom: 3px solid #2c3e50;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 28px;
            margin-bottom: 15px;
        }

        .target-row {
            display: flex;
            gap: 40px;
            font-size: 16px;
            font-weight: bold;
        }

        .target-item {
            padding: 8px 20px;
            background: #ecf0f1;
            border-radius: 4px;
            border-left: 4px solid #3498db;
        }

        /* Main Grid Layout */
        .grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        /* Common Box Styling */
        .mis-box {
            border: 3px solid #000;
            border-radius: 5px;
            overflow: hidden;
        }

        .box-header {
            background-color: #FFD700;
            padding: 12px 15px;
            font-weight: bold;
            font-size: 16px;
            border-bottom: 2px solid #000;
        }

        .box-content {
            padding: 15px;
        }

        /* Table Styles */
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            text-align: left;
            padding: 10px;
            background-color: #f8f9fa;
            border-bottom: 2px solid #ddd;
            font-weight: bold;
        }

        .data-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .input-field {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .input-field:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        /* Specific Section Styles */
        .daily-performance {
            grid-row: span 2;
        }

        .daily-table td:first-child {
            width: 60%;
            font-weight: 500;
        }

        .daily-table td:last-child {
            width: 20%;
        }

        .status-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px dashed #ddd;
        }

        .status-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .status-label {
            width: 200px;
            font-weight: 500;
        }

        .status-input {
            flex: 1;
            max-width: 300px;
        }

        /* Compressor Location */
        .compressor-locations .data-table th {
            background-color: #e8f4fc;
        }

        /* Weekly Trials */
        .weekly-trials {
            grid-column: span 2;
        }

        .weekly-table th {
            background-color: #fff8e1;
        }

        /* Development Details */
        .development-details .data-table td:first-child {
            width: 40%;
            font-weight: 500;
        }

        /* Remark Section */
        .remark-section {
            grid-column: span 2;
            margin-top: 20px;
        }

        .remark-box {
            min-height: 100px;
            width: 100%;
            padding: 15px;
            border: 2px solid #000;
            border-radius: 5px;
            font-size: 14px;
            resize: vertical;
        }

        /* Button Styles */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #eee;
            justify-content: center;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: #2c3e50;
            color: white;
        }

        .btn-primary:hover {
            background-color: #1a252f;
        }

        .btn-secondary {
            background-color: #3498db;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #2980b9;
        }

        .btn-success {
            background-color: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background-color: #219653;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .grid-container {
                grid-template-columns: 1fr;
            }
            
            .daily-performance,
            .weekly-trials,
            .remark-section {
                grid-column: span 1;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .target-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                padding: 10px;
            }
            
            .action-buttons,
            .btn {
                display: none;
            }
            
            .input-field {
                border: 1px solid #000 !important;
                background: transparent !important;
                -webkit-print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <h1>Quarry MIS</h1>
            <div class="target-row">
                <div class="target-item">Target: 1000 Holes</div>
                <div class="target-item">17 Compressors</div>
            </div>
        </div>

        <!-- Main Grid Layout -->
        <div class="grid-container">
            <!-- Left Column: Daily Performance -->
            <div class="mis-box daily-performance">
                <div class="box-header">Daily Quarry Performance</div>
                <div class="box-content">
                    <table class="data-table daily-table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>FTD</th>
                                <th>MTD</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Compressors</td>
                                <td><input type="text" class="input-field" placeholder="Enter value"></td>
                                <td><input type="text" class="input-field" placeholder="Auto-calculated"></td>
                            </tr>
                            <tr>
                                <td>NMR</td>
                                <td><input type="text" class="input-field" placeholder="Enter value"></td>
                                <td><input type="text" class="input-field" placeholder="Auto-calculated"></td>
                            </tr>
                            <tr>
                                <td>Holes</td>
                                <td><input type="text" class="input-field" placeholder="Enter value"></td>
                                <td><input type="text" class="input-field" placeholder="Auto-calculated"></td>
                            </tr>
                            <tr>
                                <td>Feets</td>
                                <td><input type="text" class="input-field" placeholder="Enter value"></td>
                                <td><input type="text" class="input-field" placeholder="Auto-calculated"></td>
                            </tr>
                            <tr>
                                <td>Production</td>
                                <td><input type="text" class="input-field" placeholder="Enter value"></td>
                                <td><input type="text" class="input-field" placeholder="Auto-calculated"></td>
                            </tr>
                            <tr>
                                <td colspan="3">Boulder transport to plant</td>
                            </tr>
                            <tr>
                                <td>Loading hrs</td>
                                <td><input type="text" class="input-field" placeholder="Enter value"></td>
                                <td><input type="text" class="input-field" placeholder="Auto-calculated"></td>
                            </tr>
                            <tr>
                                <td>Breaking hrs</td>
                                <td><input type="text" class="input-field" placeholder="Enter value"></td>
                                <td><input type="text" class="input-field" placeholder="Auto-calculated"></td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Operation Status -->
                    <div class="status-section">
                        <div class="status-row">
                            <div class="status-label">Loading start time:</div>
                            <div class="status-input">
                                <input type="time" class="input-field">
                            </div>
                        </div>
                        <div class="status-row">
                            <div class="status-label">Tipper available at loading:</div>
                            <div class="status-input">
                                <select class="input-field">
                                    <option value="">Select</option>
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                    <option value="partial">Partial</option>
                                </select>
                            </div>
                        </div>
                        <div class="status-row">
                            <div class="status-label">Operator present:</div>
                            <div class="status-input">
                                <select class="input-field">
                                    <option value="">Select</option>
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Top: Achievement Details -->
            <div class="mis-box">
                <div class="box-header">Achievement Details</div>
                <div class="box-content">
                    <table class="data-table">
                        <tbody>
                            <tr>
                                <td style="width: 40%; font-weight: 500;">Compressor</td>
                                <td><input type="text" class="input-field" placeholder="Enter value"></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 500;">Holes</td>
                                <td><input type="text" class="input-field" placeholder="Enter value"></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 500;">Recovery</td>
                                <td><input type="text" class="input-field" placeholder="Enter value"></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 500;">Breaking</td>
                                <td><input type="text" class="input-field" placeholder="Enter value"></td>
                            </tr>
                            <tr>
                                <td colspan="2" style="font-weight: 500;">Remark –</td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <input type="text" class="input-field" placeholder="Enter remarks" style="width: 100%;">
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" style="font-weight: 500;">Other Planning for Plant</td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <textarea class="input-field" placeholder="Enter planning details" rows="3" style="width: 100%; resize: vertical;"></textarea>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Right Bottom: Compressor Location Status -->
            <div class="mis-box compressor-locations">
                <div class="box-header">Compressors - Location Status</div>
                <div class="box-content">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Location</th>
                                <th>FTD</th>
                                <th>MTD</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>9 Ha – Pit 3</td>
                                <td><input type="text" class="input-field" placeholder="FTD value"></td>
                                <td><input type="text" class="input-field" placeholder="MTD value"></td>
                            </tr>
                            <tr>
                                <td>Bench 1</td>
                                <td><input type="text" class="input-field" placeholder="FTD value"></td>
                                <td><input type="text" class="input-field" placeholder="MTD value"></td>
                            </tr>
                            <tr>
                                <td>Bench 2</td>
                                <td><input type="text" class="input-field" placeholder="FTD value"></td>
                                <td><input type="text" class="input-field" placeholder="MTD value"></td>
                            </tr>
                            <tr>
                                <td>Bench 3</td>
                                <td><input type="text" class="input-field" placeholder="FTD value"></td>
                                <td><input type="text" class="input-field" placeholder="MTD value"></td>
                            </tr>
                            <tr>
                                <td>Bench 4</td>
                                <td><input type="text" class="input-field" placeholder="FTD value"></td>
                                <td><input type="text" class="input-field" placeholder="MTD value"></td>
                            </tr>
                            <tr>
                                <td>Pit-2</td>
                                <td><input type="text" class="input-field" placeholder="FTD value"></td>
                                <td><input type="text" class="input-field" placeholder="MTD value"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Weekly Trials Section -->
            <div class="mis-box weekly-trials">
                <div class="box-header">Weekly Trials</div>
                <div class="box-content">
                    <table class="data-table weekly-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Area</th>
                                <th>Compressors</th>
                                <th>NMR</th>
                                <th>Holes</th>
                                <th>Feets</th>
                                <th>Production</th>
                                <th>Recovery %</th>
                                <th>Breaking %</th>
                                <th>Total Trips</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="date" class="input-field"></td>
                                <td><input type="text" class="input-field" placeholder="Area"></td>
                                <td><input type="text" class="input-field" placeholder="Compressors"></td>
                                <td><input type="text" class="input-field" placeholder="NMR"></td>
                                <td><input type="text" class="input-field" placeholder="Holes"></td>
                                <td><input type="text" class="input-field" placeholder="Feets"></td>
                                <td><input type="text" class="input-field" placeholder="Production"></td>
                                <td><input type="text" class="input-field" placeholder="Recovery %"></td>
                                <td><input type="text" class="input-field" placeholder="Breaking %"></td>
                                <td><input type="text" class="input-field" placeholder="Total Trips"></td>
                            </tr>
                            <tr>
                                <td><input type="date" class="input-field"></td>
                                <td><input type="text" class="input-field" placeholder="Area"></td>
                                <td><input type="text" class="input-field" placeholder="Compressors"></td>
                                <td><input type="text" class="input-field" placeholder="NMR"></td>
                                <td><input type="text" class="input-field" placeholder="Holes"></td>
                                <td><input type="text" class="input-field" placeholder="Feets"></td>
                                <td><input type="text" class="input-field" placeholder="Production"></td>
                                <td><input type="text" class="input-field" placeholder="Recovery %"></td>
                                <td><input type="text" class="input-field" placeholder="Breaking %"></td>
                                <td><input type="text" class="input-field" placeholder="Total Trips"></td>
                            </tr>
                            <!-- Add more rows as needed -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Development Details -->
            <div class="mis-box development-details">
                <div class="box-header">Development Details</div>
                <div class="box-content">
                    <table class="data-table">
                        <tbody>
                            <tr>
                                <td style="font-weight: 500;">OB trips</td>
                                <td><input type="text" class="input-field" placeholder="Enter value"></td>
                            </tr>
                            <tr>
                                <td style="font-weight: 500;">Machinery uses</td>
                                <td><input type="text" class="input-field" placeholder="Enter machinery details" style="width: 100%;"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Remark Section -->
            <div class="mis-box remark-section">
                <div class="box-header">Remark</div>
                <div class="box-content">
                    <textarea class="remark-box" placeholder="Enter detailed remarks, observations, issues, or special instructions..."></textarea>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="saveData()">Save Data</button>
            <button class="btn btn-secondary" onclick="calculateMTD()">Calculate MTD</button>
            <button class="btn btn-success" onclick="generateReport()">Generate Report</button>
            <button class="btn" onclick="printReport()">Print Report</button>
            <button class="btn" onclick="clearAll()">Clear All</button>
        </div>
    </div>

    <script>
        // JavaScript Functions for MIS Operations
        
        function saveData() {
            // Collect all input data
            const inputs = document.querySelectorAll('.input-field, .remark-box');
            const data = {};
            
            inputs.forEach((input, index) => {
                data[`field_${index}`] = input.value;
            });
            
            // Save to localStorage (can be replaced with server API)
            localStorage.setItem('quarryMIS_data', JSON.stringify(data));
            localStorage.setItem('quarryMIS_lastSaved', new Date().toLocaleString());
            
            alert('Data saved successfully!\nLast saved: ' + new Date().toLocaleString());
            
            // Optional: Auto-calculate MTD
            calculateMTD();
        }
        
        function calculateMTD() {
            // Example MTD calculation logic
            const ftdInputs = document.querySelectorAll('td:nth-child(2) .input-field');
            const mtdInputs = document.querySelectorAll('td:nth-child(3) .input-field');
            
            // For demo purposes - in real scenario, you would sum with previous MTD values
            ftdInputs.forEach((ftdInput, index) => {
                if (mtdInputs[index]) {
                    const ftdValue = parseFloat(ftdInput.value) || 0;
                    const prevMtd = parseFloat(localStorage.getItem(`mtd_${index}`)) || 0;
                    const newMtd = ftdValue + prevMtd;
                    
                    mtdInputs[index].value = newMtd.toFixed(2);
                }
            });
            
            alert('MTD values calculated successfully!');
        }
        
        function generateReport() {
            // Generate a downloadable report
            const reportDate = new Date().toLocaleDateString();
            let reportContent = `QUARRY MIS REPORT\n`;
            reportContent += `Generated on: ${reportDate}\n\n`;
            
            // Add header info
            reportContent += `Target: 1000 Holes | 17 Compressors\n\n`;
            
            // Add Daily Performance
            reportContent += `DAILY QUARRY PERFORMANCE:\n`;
            const performanceLabels = ['Compressors', 'NMR', 'Holes', 'Feets', 'Production', 'Loading hrs', 'Breaking hrs'];
            performanceLabels.forEach((label, index) => {
                const ftd = document.querySelectorAll('.daily-table tr')[index + 1]?.querySelector('td:nth-child(2) .input-field')?.value || 'N/A';
                const mtd = document.querySelectorAll('.daily-table tr')[index + 1]?.querySelector('td:nth-child(3) .input-field')?.value || 'N/A';
                reportContent += `${label}: FTD=${ftd}, MTD=${mtd}\n`;
            });
            
            // Convert to blob and download
            const blob = new Blob([reportContent], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Quarry_MIS_Report_${reportDate.replace(/\//g, '-')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            alert('Report generated and downloaded!');
        }
        
        function printReport() {
            // Store current values
            const inputs = document.querySelectorAll('.input-field');
            inputs.forEach(input => {
                if (!input.value) {
                    input.placeholder = '';
                }
            });
            
            // Trigger print
            window.print();
        }
        
        function clearAll() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                const inputs = document.querySelectorAll('.input-field, .remark-box, select');
                inputs.forEach(input => {
                    if (input.tagName === 'SELECT') {
                        input.selectedIndex = 0;
                    } else {
                        input.value = '';
                    }
                });
                
                // Restore placeholders
                document.querySelectorAll('.input-field').forEach(input => {
                    input.placeholder = input.dataset.originalPlaceholder || '';
                });
                
                alert('All data cleared successfully!');
            }
        }
        
        // Load saved data on page load
        window.addEventListener('DOMContentLoaded', () => {
            const savedData = localStorage.getItem('quarryMIS_data');
            if (savedData) {
                if (confirm('Load previously saved data?')) {
                    const data = JSON.parse(savedData);
                    const inputs = document.querySelectorAll('.input-field, .remark-box');
                    
                    inputs.forEach((input, index) => {
                        if (data[`field_${index}`]) {
                            input.value = data[`field_${index}`];
                        }
                    });
                }
            }
            
            // Store original placeholders
            document.querySelectorAll('.input-field').forEach(input => {
                input.dataset.originalPlaceholder = input.placeholder;
            });
            
            // Set default date for weekly trials
            const today = new Date().toISOString().split('T')[0];
            document.querySelectorAll('input[type="date"]').forEach(dateInput => {
                if (!dateInput.value) {
                    dateInput.value = today;
                }
            });
        });
        
        // Auto-save on input change (optional)
        let saveTimeout;
        document.querySelectorAll('.input-field, .remark-box').forEach(input => {
            input.addEventListener('input', () => {
                clearTimeout(saveTimeout);
                saveTimeout = setTimeout(() => {
                    // Auto-save after 30 seconds of inactivity
                    saveData();
                }, 30000);
            });
        });
    </script>
</body>
</html>
